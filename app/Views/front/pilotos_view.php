<?php
$pilotos = [
    [
        'nombre' => 'Max Verstappen',
        'foto' => 'assets/img/pilotos/verstappen.jpg',
        'equipo' => 'Red Bull Racing',
        'nacionalidad' => 'Países Bajos',
        'edad' => 27,
        'puntos' => 136,
        'f1url' => 'https://www.formula1.com/en/drivers/max-verstappen.html'
    ],
    [
        'nombre' => 'Lewis Hamilton',
        'foto' => 'assets/img/pilotos/hamilton.jpg',
        'equipo' => 'Ferrari',
        'nacionalidad' => 'Reino Unido',
        'edad' => 39,
        'puntos' => 63,
        'f1url' => 'https://www.formula1.com/en/drivers/lewis-hamilton.html'
    ],
    [
        'nombre' => 'Charles Leclerc',
        'foto' => 'assets/img/pilotos/leclerc.jpg',
        'equipo' => 'Ferrari',
        'nacionalidad' => 'Mónaco',
        'edad' => 26,
        'puntos' => 79,
        'f1url' => 'https://www.formula1.com/en/drivers/charles-leclerc.html'
    ],
    [
        'nombre' => 'Fernando Alonso',
        'foto' => 'assets/img/pilotos/alonso.jpg',
        'equipo' => 'Aston Martin',
        'nacionalidad' => 'España',
        'edad' => 42,
        'puntos' => 0,
        'f1url' => 'https://www.formula1.com/en/drivers/fernando-alonso.html'
    ],
    [
        'nombre' => 'Carlos Sainz',
        'foto' => 'assets/img/pilotos/sainz.jpg',
        'equipo' => 'Williams',
        'nacionalidad' => 'España',
        'edad' => 28,
        'puntos' => 12,
        'f1url' => 'https://www.formula1.com/en/drivers/carlos-sainz.html'
    ],
    [
        'nombre' => 'Lando Norris',
        'foto' => 'assets/img/pilotos/norris.jpg',
        'equipo' => 'McLaren',
        'nacionalidad' => 'Reino Unido',
        'edad' => 23,
        'puntos' => 158,
        'f1url' => 'https://www.formula1.com/en/drivers/lando-norris.html'
    ],
    [
        'nombre' => 'George Russell',
        'foto' => 'assets/img/pilotos/russell.jpg',
        'equipo' => 'Mercedes',
        'nacionalidad' => 'Reino Unido',
        'edad' => 25,
        'puntos' => 99,
        'f1url' => 'https://www.formula1.com/en/drivers/george-russell.html'
    ],
    [
        'nombre' => 'Franco Colapinto',
        'foto' => 'assets/img/pilotos/colapinto.jpg',
        'equipo' => 'Alpine',
        'nacionalidad' => 'Reino Unido',
        'edad' => 22,
        'puntos' => 0,
        'f1url' => 'https://www.formula1.com/en/drivers/franco-colapinto.html'
    ],
    [
        'nombre' => 'Pierre Gasly',
        'foto' => 'assets/img/pilotos/gasly.jpg',
        'equipo' => 'Alpine',
        'nacionalidad' => 'Francia',
        'edad' => 27,
        'puntos' => 7,
        'f1url' => 'https://www.formula1.com/en/drivers/pierre-gasly.html'
    ],
    [
        'nombre' => 'Lance Stroll',
        'foto' => 'assets/img/pilotos/stroll.jpg',
        'equipo' => 'Aston Martin',
        'nacionalidad' => 'Canadá',
        'edad' => 24,
        'puntos' => 14,
        'f1url' => 'https://www.formula1.com/en/drivers/lance-stroll.html'
    ],
    [
        'nombre' => 'Esteban Ocon',
        'foto' => 'assets/img/pilotos/ocon.jpg',
        'equipo' => 'Haas F1 Team',
        'nacionalidad' => 'Francia',
        'edad' => 27,
        'puntos' => 20,
        'f1url' => 'https://www.formula1.com/en/drivers/esteban-ocon.html'
    ],
    [
        'nombre' => 'Oscar Piastri',
        'foto' => 'assets/img/pilotos/piastri.jpg',
        'equipo' => 'McLaren',
        'nacionalidad' => 'Australia',
        'edad' => 22,
        'puntos' => 161,
        'f1url' => 'https://www.formula1.com/en/drivers/oscar-piastri.html'
    ],
    [
        'nombre' => 'Yuki Tsunoda',
        'foto' => 'assets/img/pilotos/tsunoda.jpg',
        'equipo' => 'Red Bull Racing',
        'nacionalidad' => 'Japón',
        'edad' => 23,
        'puntos' => 10,
        'f1url' => 'https://www.formula1.com/en/drivers/yuki-tsunoda.html'
    ],
    [
        'nombre' => 'Alexander Albon',
        'foto' => 'assets/img/pilotos/albon.jpg',
        'equipo' => 'Williams',
        'nacionalidad' => 'Tailandia',
        'edad' => 28,
        'puntos' => 42,
        'f1url' => 'https://www.formula1.com/en/drivers/alexander-albon.html'
    ],
    [
        'nombre' => 'Oliver Bearman',
        'foto' => 'assets/img/pilotos/bearman.jpg',
        'equipo' => 'Haas F1 Team',
        'nacionalidad' => 'Reino Unido',
        'edad' => 19,
        'puntos' => 6,
        'f1url' => 'https://www.formula1.com/en/drivers/oliver-bearman.html'
    ],
    [
        'nombre' => 'Liam Lawson',
        'foto' => 'assets/img/pilotos/lawson-racing-bulls.jpg',
        'equipo' => 'Red Bull Racing',
        'nacionalidad' => 'Nueva Zelanda',
        'edad' => 22,
        'puntos' => 4,
        'f1url' => 'https://www.formula1.com/en/drivers/liam-lawson.html'
    ],
    [
        'nombre' => 'Gabriel Bortoleto',
        'foto' => 'assets/img/pilotos/bortoleto.jpg',
        'equipo' => 'Kick Sauber',
        'nacionalidad' => 'Brasil',
        'edad' => 19,
        'puntos' => 0,
        'f1url' => 'https://www.formula1.com/en/drivers/gabriel-bortoleto.html'
    ],
    [
        'nombre' => 'Nico Hülkenberg',
        'foto' => 'assets/img/pilotos/hulkenberg.jpg',
        'equipo' => 'Kick Sauber',
        'nacionalidad' => 'Alemania',
        'edad' => 36,
        'puntos' => 6,
        'f1url' => 'https://www.formula1.com/en/drivers/nico-hulkenberg.html'
    ],
    [
        'nombre' => 'Isack Hadjar',
        'foto' => 'assets/img/pilotos/hadjar.jpg',
        'equipo' => 'Red Bull Racing',
        'nacionalidad' => 'Francia',
        'edad' => 19,
        'puntos' => 15,
        'f1url' => 'https://www.formula1.com/en/drivers/isack-hadjar.html'
    ],
    [
        'nombre' => 'Andrea Kimi Antonelli',
        'foto' => 'assets/img/pilotos/antonelli.jpg',
        'equipo' => 'Mercedes',
        'nacionalidad' => 'Italia',
        'edad' => 17,
        'puntos' => 48,
        'f1url' => 'https://www.formula1.com/en/drivers/kimi-antonelli.html'
    ],
];
    usort($pilotos, function($a, $b) {
        return $b['puntos'] <=> $a['puntos'];
    });
?>

<div class="container my-5">
    <h2 class="text-center text-white mb-4">Pilotos F1 - Temporada Actual</h2>
    <div class="row mb-3">
        <div class="col-md-4 mx-auto">
            <select id="ordenarPilotos" class="form-select">
                <option value="puntos">Ordenar por puntos</option>
                <option value="nombre">Ordenar alfabéticamente</option>
            </select>
        </div>
    </div>
    <div class="row" id="pilotos-lista">
        <?php foreach ($pilotos as $piloto): ?>
        <div class="col-md-3 mb-4 piloto-card" 
             data-nombre="<?= strtolower($piloto['nombre']) ?>" 
             data-puntos="<?= $piloto['puntos'] ?>">
            <div class="card h-100 shadow">
                <a href="<?= $piloto['f1url'] ?>" target="_blank">
                    <img src="<?= base_url($piloto['foto']) ?>" class="card-img-top" alt="<?= $piloto['nombre'] ?>" style="height:260px; object-fit:cover; object-position:top;">
                </a>
                <div class="card-body">
                    <h5 class="card-title"><?= $piloto['nombre'] ?></h5>
                    <p class="card-text mb-1"><strong>Equipo:</strong> <?= $piloto['equipo'] ?></p>
                    <p class="card-text mb-1"><strong>Nacionalidad:</strong> <?= $piloto['nacionalidad'] ?></p>
                    <p class="card-text mb-1"><strong>Edad:</strong> <?= $piloto['edad'] ?></p>
                    <p class="card-text"><strong>Puntos:</strong> <?= $piloto['puntos'] ?></p>
                </div>
            </div>
        </div>
        <?php endforeach; ?>
    </div>
</div>

<script>
document.getElementById('ordenarPilotos').addEventListener('change', function() {
    let criterio = this.value;
    let cards = Array.from(document.querySelectorAll('.piloto-card'));
    let contenedor = document.getElementById('pilotos-lista');
    cards.sort(function(a, b) {
        if (criterio === 'puntos') {
            return b.dataset.puntos - a.dataset.puntos;
        } else {
            return a.dataset.nombre.localeCompare(b.dataset.nombre);
        }
    });
    cards.forEach(card => contenedor.appendChild(card));
});
</script>